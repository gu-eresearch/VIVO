(function($){$.tools=$.tools||{version:"@VERSION"};$.tools.scrollable={conf:{activeClass:"active",circular:false,clonedClass:"cloned",disabledClass:"disabled",easing:"swing",initialIndex:0,item:"> *",items:".items",keyboard:true,mousewheel:false,next:".next",prev:".prev",size:1,speed:800,vertical:false,touch:true,wheelSpeed:0}};function dim(el,key){var v=parseInt(el.css(key),10);if(v){return v;}var s=el[0].currentStyle;return s&&s.width&&parseInt(s.width,10);}function find(root,query){var el=$(query);return el.length<2?el:root.parent().find(query);}var current;function Scrollable(root,conf){var self=this,fire=root.add(self),itemWrap=root.children(),index=0,vertical=conf.vertical;if(!current){current=self;}if(itemWrap.length>1){itemWrap=$(conf.items,root);}if(conf.size>1){conf.circular=false;}$.extend(self,{getConf:function(){return conf;},getIndex:function(){return index;},getSize:function(){return self.getItems().size();},getNaviButtons:function(){return prev.add(next);},getRoot:function(){return root;},getItemWrap:function(){return itemWrap;},getItems:function(){return itemWrap.find(conf.item).not("."+conf.clonedClass);},move:function(offset,time){return self.seekTo(index+offset,time);},next:function(time){return self.move(conf.size,time);},prev:function(time){return self.move(-conf.size,time);},begin:function(time){return self.seekTo(0,time);},end:function(time){return self.seekTo(self.getSize()-1,time);},focus:function(){current=self;return self;},addItem:function(item){item=$(item);if(!conf.circular){itemWrap.append(item);next.removeClass("disabled");}else{itemWrap.children().last().before(item);itemWrap.children().first().replaceWith(item.clone().addClass(conf.clonedClass));}fire.trigger("onAddItem",[item]);return self;},seekTo:function(i,time,fn){if(!i.jquery){i*=1;}if(conf.circular&&i===0&&index==-1&&time!==0){return self;}if(!conf.circular&&i<0||i>self.getSize()||i<-1){return self;}var item=i;if(i.jquery){i=self.getItems().index(i);}else{item=self.getItems().eq(i);}var e=$.Event("onBeforeSeek");if(!fn){fire.trigger(e,[i,time]);if(e.isDefaultPrevented()||!item.length){return self;}}var props=vertical?{top:-item.position().top}:{left:-item.position().left};index=i;current=self;if(time===undefined){time=conf.speed;}itemWrap.animate(props,time,conf.easing,fn||function(){fire.trigger("onSeek",[i]);});return self;}});$.each(["onBeforeSeek","onSeek","onAddItem"],function(i,name){if($.isFunction(conf[name])){$(self).bind(name,conf[name]);}self[name]=function(fn){if(fn){$(self).bind(name,fn);}return self;};});if(conf.circular){var cloned1=self.getItems().slice(-1).clone().prependTo(itemWrap),cloned2=self.getItems().eq(1).clone().appendTo(itemWrap);cloned1.add(cloned2).addClass(conf.clonedClass);self.onBeforeSeek(function(e,i,time){if(e.isDefaultPrevented()){return;}if(i==-1){self.seekTo(cloned1,time,function(){self.end(0);});return e.preventDefault();}else{if(i==self.getSize()){self.seekTo(cloned2,time,function(){self.begin(0);});}}});var hidden_parents=root.parents().add(root).filter(function(){if($(this).css("display")==="none"){return true;}});if(hidden_parents.length){hidden_parents.show();self.seekTo(0,0,function(){});hidden_parents.hide();}else{self.seekTo(0,0,function(){});}}var prev=find(root,conf.prev).click(function(e){e.stopPropagation();self.prev();}),next=find(root,conf.next).click(function(e){e.stopPropagation();self.next();});if(!conf.circular){self.onBeforeSeek(function(e,i){setTimeout(function(){if(!e.isDefaultPrevented()){prev.toggleClass(conf.disabledClass,i<=0);next.toggleClass(conf.disabledClass,i>=self.getSize()-1);}},1);});if(!conf.initialIndex){prev.addClass(conf.disabledClass);}}if(self.getSize()<2){prev.add(next).addClass(conf.disabledClass);}if(conf.mousewheel&&$.fn.mousewheel){root.mousewheel(function(e,delta){if(conf.mousewheel){self.move(delta<0?1:-1,conf.wheelSpeed||50);return false;}});}if(conf.touch){var touch={};itemWrap[0].ontouchstart=function(e){var t=e.touches[0];touch.x=t.clientX;touch.y=t.clientY;};itemWrap[0].ontouchmove=function(e){if(e.touches.length==1&&!itemWrap.is(":animated")){var t=e.touches[0],deltaX=touch.x-t.clientX,deltaY=touch.y-t.clientY;self[vertical&&deltaY>0||!vertical&&deltaX>0?"next":"prev"]();e.preventDefault();}};}if(conf.keyboard){$(document).bind("keydown.scrollable",function(evt){if(!conf.keyboard||evt.altKey||evt.ctrlKey||evt.metaKey||$(evt.target).is(":input")){return;}if(conf.keyboard!="static"&&current!=self){return;}var key=evt.keyCode;if(vertical&&(key==38||key==40)){self.move(key==38?-1:1);return evt.preventDefault();}if(!vertical&&(key==37||key==39)){self.move(key==37?-1:1);return evt.preventDefault();}});}if(conf.initialIndex){self.seekTo(conf.initialIndex,0,function(){});}}$.fn.scrollable=function(conf){var el=this.data("scrollable");if(el){return el;}conf=$.extend({},$.tools.scrollable.conf,conf);this.each(function(){el=new Scrollable($(this),conf);$(this).data("scrollable",el);});return conf.api?el:this;};})(jQuery);(function($){var t=$.tools.scrollable;t.autoscroll={conf:{autoplay:true,interval:6000,autopause:true}};$.fn.autoscroll=function(conf){if(typeof conf=="number"){conf={interval:conf};}var opts=$.extend({},t.autoscroll.conf,conf),ret;this.each(function(){var api=$(this).data("scrollable"),root=api.getRoot(),timer,stopped=false;function scroll(){timer=setTimeout(function(){api.next();},opts.interval);}if(api){ret=api;}api.play=function(){if(timer){return;}stopped=false;root.bind("onSeek",scroll);scroll();};api.pause=function(){timer=clearTimeout(timer);root.unbind("onSeek",scroll);};api.resume=function(){stopped||api.play();};api.stop=function(){stopped=true;api.pause();};if(opts.autopause){root.add(api.getNaviButtons()).hover(api.pause,api.resume);}if(opts.autoplay){api.play();}});return opts.api?ret:this;};})(jQuery);var allLoaded=false;var rssItems=[];$(document).ready(function(){var numberOfWords=15;$.ajax({type:"GET",url:rss_proxy_url,dataType:"xml",success:parseXml2});function parseXml2(xml){var key=0;var html="";$(xml).find("item").each(function(){if(key<1000){var rss_id=$(this).find("guid").text();var title=$(this).find("title").text();var date=$(this).find("date").text();var desc=trimByWord($(this).find("description").text());html+='<li class="entry'+key+'">';html+='<a class="rss-a'+key+'" href="http://www3.griffith.edu.au/03/ertiki/tiki-read_article.php?articleId='+rss_id+'" target="_blank">';html+='<div class="rss_img"><img src="http://www3.griffith.edu.au/03/ertiki/article_image.php?id='+rss_id+'" alt="'+title+'"/></div>';html+='<span class="rss_title">'+title+"</span>";html+='<div class="rss_desc"><span>'+desc+"</span></div>";html+="</a></li>";}key++;});$(".ul-rss-wrapper").html(html);$(".rss-wrapper").scrollable({circular:true,vertical:true}).autoscroll({autoplay:true,interval:6000});}function trimByWord(str_data){var result=str_data;var resultArray=result.split(" ");if(resultArray.length>numberOfWords){resultArray=resultArray.slice(0,numberOfWords);result=resultArray.join(" ")+" ... read more";}else{result=resultArray.join(" ")+" ... read more";}return result;}});$(document).ready(function(){$("#intro-lft-search-nav li").click(function(){$("#intro-lft-search-nav li").each(function(){if($(this).find(".active")){$(this).removeClass("active");var childNum=$(this).index();if($("#intro-left-search-container div:eq("+childNum+")").css("display")=="block"){$("#intro-left-search-container div:eq("+childNum+")").hide();}}});var searchNum=$(this).index();$("#intro-left-search-container div:eq("+searchNum+")").show();$(this).addClass("active");});});function submit_keyword_form(){var path=postVars("intro-left-tsearch-input",site_url+"/search?querytext=");}function submit_researcher_form(){var path=postVars("intro-left-rsearch-input",site_url+"/search?querytext=","&submit=Search#fq={!tag=classgroup}classgroup%3A%22http%3A%2F%2Fresearch-hub.griffith.edu.au%2Findividual%2FvitroClassGroupresearchers%22");}function postVars(input_id,def_path,def_path_sec2){var inputval=$.trim($("#"+input_id).val());if(inputval.length>0){if(def_path_sec2){var path=def_path+($("#"+input_id).val())+def_path_sec2;$("#"+input_id).val("");}else{var path=def_path+($("#"+input_id).val());$("#"+input_id).val("");}window.location=path;}}